#
# Do NOT edit this file, create a <device-name>-user.yml in the same directory instead
#
deviceName: "TX-81z"
brand: "Yamaha"
macros:
  - "VMEM() : 1008 : F0 43 20 04 F7"                 # Voice Memory Bulk
  - "PMEM() : 0992 : F0 43 20 7E 'LM  8976PM' F7"    # 32 Performance Bulk
  - "SCED() : 008E : F0 43 20 7E 'LM  8976AE' F7"    # ACED + VCED Edit buffer
  - "PCED() : 0080 : F0 43 20 7E 'LM  8976PE' F7"    # Performance Edit Buffer

  - "System Data()                     : 002D : F0 43 20 7E 'LM  8976S0' F7"
  - "Program Change Table()            : 0112 : F0 43 20 7E 'LM  8976S1' F7"
  - "Effect Data()                     : 0049 : F0 43 20 7E 'LM  8976S2' F7"
  - "Micro Tune Octave()               : 002A : F0 43 20 7E 'LM  MCRTE0' F7"
  - "Micro Tune Full Keyboard()        : 0112 : F0 43 20 7E 'LM  MCRTE1' F7"
  - "Everything()                      : System Data();Program Change Table();Effect Data();Micro Tune Octave();Micro Tune Full Keyboard();VMEM();PMEM();SCED();PCED()"
  # VCED params
  - "OP1_FREQ(v)                       : - :  F0 43 10 12 32 v F7" # CRS, value in the range [0-63]
  - "getVoiceName()                    : SCED() : YamahaVoiceMapper"
  - "getPerformanceName()              : PCED() : YamahaPerformanceMapper"
  # The TX-81z does not support Bank Select, so we have to change the PrgChgTable to be able to select all the patches from the limited range of program change [0-127]
  # See page 77 of manual
  # select bank I,A,B,C in the range [0-127] (factory settings)
  - "setDefaultPrgChgTable()           : F0 43 00 7E 02 0A 'LM  8976S1' 00 00 00 01 00 02 00 03 00 04 00 05 00 06 00 07 00 08 00 09 00 0A 00 0B 00 0C 00 0D 00 0E 00 0F 00 10 00 11 00 12 00 13 00 14 00 15 00 16 00 17 00 18 00 19 00 1A 00 1B 00 1C 00 1D 00 1E 00 1F 00 20 00 21 00 22 00 23 00 24 00 25 00 26 00 27 00 28 00 29 00 2A 00 2B 00 2C 00 2D 00 2E 00 2F 00 30 00 31 00 32 00 33 00 34 00 35 00 36 00 37 00 38 00 39 00 3A 00 3B 00 3C 00 3D 00 3E 00 3F 00 40 00 41 00 42 00 43 00 44 00 45 00 46 00 47 00 48 00 49 00 4A 00 4B 00 4C 00 4D 00 4E 00 4F 00 50 00 51 00 52 00 53 00 54 00 55 00 56 00 57 00 58 00 59 00 5A 00 5B 00 5C 00 5D 00 5E 00 5F 00 60 00 61 00 62 00 63 00 64 00 65 00 66 00 67 00 68 00 69 00 6A 00 6B 00 6C 00 6D 00 6E 00 6F 00 70 00 71 00 72 00 73 00 74 00 75 00 76 00 77 00 78 00 79 00 7A 00 7B 00 7C 00 7D 00 7E 00 7F CK266 F7"
  # select bank D in the range [0-31] and Performances 1-24 in the range [32-55]
  - "setModifedPrgChgTable()           : F0 43 00 7E 02 0A 'LM  8976S1' 01 00 01 01 01 02 01 03 01 04 01 05 01 06 01 07 01 08 01 09 01 0A 01 0B 01 0C 01 0D 01 0E 01 0F 01 10 01 11 01 12 01 13 01 14 01 15 01 16 00 17 00 18 00 19 00 1A 00 1B 00 1C 00 1D 00 1E 00 1F 01 20 01 21 01 22 01 23 01 24 01 25 01 26 01 27 01 28 01 29 01 2A 01 2B 01 2C 01 2D 01 2E 01 2F 01 30 01 31 01 32 01 33 01 34 01 35 01 36 01 37 00 38 00 39 00 3A 00 3B 00 3C 00 3D 00 3E 00 3F 00 40 00 41 00 42 00 43 00 44 00 45 00 46 00 47 00 48 00 49 00 4A 00 4B 00 4C 00 4D 00 4E 00 4F 00 50 00 51 00 52 00 53 00 54 00 55 00 56 00 57 00 58 00 59 00 5A 00 5B 00 5C 00 5D 00 5E 00 5F 00 60 00 61 00 62 00 63 00 64 00 65 00 66 00 67 00 68 00 69 00 6A 00 6B 00 6C 00 6D 00 6E 00 6F 00 70 00 71 00 72 00 73 00 74 00 75 00 76 00 77 00 78 00 79 00 7A 00 7B 00 7C 00 7D 00 7E 00 7F CK266 F7"
#
# Select how to send bank select messages to the device:
# ------------------------------------------------------
# NO_BANK_PRG      : Does not send bank select, send only Program Change
# BANK_MSB_PRG     : Send CC "BANK Select MSB" only, then Program Change
# BANK_LSB_PRG     : Send CC "BANK Select LSB" only, then Program Change
# BANK_MSB_LSB_PRG : Send CC "BANK Select MSB" then "BANK Select LSB", then Program Change
# BANK_PRG_PRG     : Send 2 Program Changes (used by Yamaha TG-77 in 'direct mode')
#
presetFormat: NO_BANK_PRG
#
# FROM_ONE : preset number start from 1, it will be converted to n-1
# FROM_ZERO: preset number will be sent "as is"
#
presetNumbering: FROM_ZERO
#
# STANDARD     : it is possible to get the patch name with SysEx
# SOUND_CANVAS : Path names are hardcoded in java application
#
presetNaming: STANDARD

categories:
  - "Drum"
  - "Keyboard: Piano, Rhode,Grand, Pno, EP"
  - "Chromatic Percussion: Clav, Marimba, Bell, Vibe, Celst,Pluck,Celeste"
  - "Organ: Organ, Church"
  - "Guitar: Gtr,Strat,Overdrive,Nylon,Steel,Guit"
  - "Bass: Fretless, Bass, Slap"
  - "String: Pizz, Marcato, String, Harp, Alto, Strg"
  - "Brass: Bras, Trumpet, Horn, Trombone,Sax, Tpts,Brs"
  - "Woodwinds: Flute,Ocarina,Pan,Harmon,Whistle,Wind,Flt"
  - "Synth Pad: Pad"
  - "Synth Lead: Lead, Sweep"
  - "Voice: Ahh, Ohh, Vox,Vocal,Choir"

# The mode is automatically changed according to th PrgChgTable.
# - If the PrgChg match a performance, the TX81z switch to the performance mode
# - If the PrgChg match a voice, the TX81z switch to the voice mode
deviceModes:
  PerformanceMode:
    command: setModifedPrgChgTable()
    banks:
      "Performances":
        queryName: getPerformanceName()
        presetDomain: 32-55
  SingleMode:
    command: setModifedPrgChgTable()
    banks:
      "Bank D":
        queryName: getVoiceName()
        presetDomain: 0-31
      "Bank A":
        queryName: getVoiceName()
        presetDomain: 32-63
      "Bank B":
        queryName: getVoiceName()
        presetDomain: 64-95
      "Bank C":
        queryName: getVoiceName()
        presetDomain: 96-127
  SingleModeInternal:
    command: setDefaultPrgChgTable()
    banks:
      "Bank Internal":
        queryName: getVoiceName()
        presetDomain: 0-31

#
# Mappers to extract patch names
#
mappers:
  YamahaVoiceMapper:
    fields:
      name:
        type: STRING
        offset: $7C
        size: 10
  YamahaPerformanceMapper:
    fields:
      name:
        type: STRING
        offset: $74
        size: 10