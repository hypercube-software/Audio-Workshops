#
# Do NOT edit this file, create a <device-name>-user.yml in the same directory instead
#
# this synth have many compatibility modes: QS300, TG300B, XG, GM
deviceName: "CS1x"
brand: "Yamaha"
presetFormat: BANK_MSB_LSB_PRG
presetNaming: STANDARD
macros:
  - "XG Mode()              : -- : F0 43 11 4C 00 00 7E 00 F7"
  - "GM Mode()              : -- : F0 7E 7F 09 01 F7"
  # Native Dump Request
  - "NativeRequest(addr)    : -- : F043204B addr F7"
  - "SYSTEM()               : 23 : NativeRequest( 50 00 00 )"
  - "Cur Perf Common()      : 39 : NativeRequest( 60 00 00 )"
  - "Cur Perf Common FX()   : 22 : NativeRequest( 60 00 30 )"
  - "Cur Perf Common CC()   : 14 : NativeRequest( 60 00 50 )"
  - "Cur Perf Layer(layer)  : 34 : NativeRequest( 60 layer 00 )"
  - "User Perf Common(perf) : 39 : NativeRequest( 70 perf 00 )"
  - "User Perf Layer1(perf) : 34 : NativeRequest( 71 perf 00 )"
  - "User Perf Layer2(perf) : 34 : NativeRequest( 72 perf 00 )"
  - "User Perf Layer3(perf) : 34 : NativeRequest( 73 perf 00 )"
  - "User Perf Layer4(perf) : 34 : NativeRequest( 74 perf 00 )"
  - "Cur Perf Layers()   : Cur Perf Layer([01-04])"
  - "User Perfs(perf) : User Perf Common(perf);User Perf Layer1(perf);User Perf Layer2(perf);User Perf Layer3(perf);User Perf Layer4(perf)"
  - "All User Perfs() : User Perfs([00-127])"
  - "NativeEverything(): SYSTEM();CurrentPerformance();All User Perfs()"
  - "PerformanceName() : Cur Perf Common() : PerformanceMapper"
  - "CurrentPerformance(): Cur Perf Common();Cur Perf Common FX();Cur Perf Common CC();Cur Perf Layers()"
  # "MIDI Data Table <2-2>" in the manual,Parameter Change CS1x SYSTEM
  # mode = $03 PFM, mode = $01 XG
  - "setMode(mode) : F043104B 50 00 06 mode F7"
  - "setPerformanceMode() : setMode($03)"
  - "setXGMode() : setMode($01)"
  # XG Dump Request (must be in MULTI mode)
  - "XG SYSTEM()          : 034 : F043204C 080000 F7"
  - "XG MULTI EFFECT()    : 019 : F043204C 020100 F7"
  - "XG MULTI PART(part)  : 034 : F043204C 08 part 00 F7"
  - "XG DRUM Setup 1(kit) : 01B : F043204C 30 kit 00 F7"
  - "XG DRUM Setup 2(kit) : 01B : F043204C 31 kit 00 F7"
  - "XG MULTI PARTS()     : XG MULTI PART([00-15])"
  - "XG DRUM Setups 1()   : XG DRUM Setup 1([24-84])"
  - "XG DRUM Setups 2()   : XG DRUM Setup 2([24-84])"
  - "XGEveryting(): XG SYSTEM()();XG MULTI EFFECT();XG MULTI PARTS();XG DRUM Setups 1();XG DRUM Setups 2()"
  - "XG Multi Part Data(part) : F043204C 08 part 00 F7 : XGPartMapper"

#
# Banks are listed in manual page 37
# Categories found in manual page 24
#
deviceModes:
  Performance:
    command: setPerformanceMode()
    backupCommand: CurrentPerformance()
    queryName: PerformanceName()
    midiChannels: 0
    banks:
      "Performances":
        command: $3F40
        presetDomain: 0-127
      "User Performance":
        command: $3F41
        presetDomain: 0-127
    categories:
      - "Not specified"
      - "Piano"
      - "Chromatic Percussion"
      - "Organ"
      - "Guitar"
      - "Bass"
      - "Strings"
      - "Ensemble"
      - "Brass"
      - "Reed"
      - "Pipe"
      - "Synth Lead"
      - "Synth Pad"
      - "Synth FX"
      - "Ethnic"
      - "Percussive"
      - "Sound FX"
      - "Drums"
      - "Synth Comping"
      - "Vocal"
      - "Combination"
      - "Material Wave"
      - "Sequence"
  XG:
    command: setMode($01)
    backupCommand: XG MULTI PARTS()
    midiChannels: 0-15
    #queryName: XG Multi Part Data($00)
    presetNaming: YAMAHA_XG
    banks:
      "XG SFX KITS":
        command: "$7E00"
        category: 16
        presetDomain: 0,1
      "XG DRUM KITS":
        command: "$7F00"
        category: 16
        presetDomain: 0,1,8,16,24,25,32,40,48
      "XG 000":
        command: "$0000"
        presetDomain: 0-127
      "XG 001 (KSP)":
        command: "$0001"
        presetDomain: 0-7,11-12
      "XG 003 (Stereo)":
        command: "$0003"
        presetDomain: 48-49,52
      "XG 006 (Single)":
        command: "$0006"
        presetDomain: 39,60,80-81
      "XG 008 (Slow)":
        command: "$0008"
        presetDomain: 40,44,48-49,80-81,102
      "XG 012 (Fast Decay)":
        command: "$000C"
        presetDomain: 39,62,98
      "XG 014 (Double Attack)":
        command: "$000E"
        presetDomain: 98,102
      "XG 016 (Bright 1)":
        command: "$0010"
        presetDomain: 24-25,52,56,58,87,89
      "XG 017 (Bright 2)":
        command: "$0011"
        presetDomain: 56,89
      "XG 018 (Dark 1)":
        command: "$0012"
        presetDomain: 0,4,26,33,38-39,57,63,80-81,89,98-99
      "XG 019 (Dark 2)":
        command: "$0013"
        presetDomain: 39,80-81,99
      "XG 020 (Resonant)":
        command: "$0014"
        presetDomain: 38,62,81,95
      "XG 024 (Attack)":
        command: "$0018"
        presetDomain: 17,38,48,62,81,85
      "XG 025 (Release)":
        command: "$0019"
        presetDomain: 6,24,81
      "XG 027 (Resonant Sweep)":
        command: "$001B"
        presetDomain: 7,33,36,50,62,95,97
      "XG 028 (Muted)":
        command: "$001C"
        presetDomain: 34,105
      "XG 032 (Detune 1)":
        command: "$0020"
        presetDomain: 2,4-5,16-17,19,21-22,26-27,35-36,39,52,56,60,62,104
      "XG 033 (Detune 2)":
        command: "$0021"
        presetDomain: 5,16-17,35
      "XG 034 (Detune 3)":
        command: "$0022"
        presetDomain: 5,16,35
      "XG 035 (Octave 1)":
        command: "$0023"
        presetDomain: 6,15-16,19,25,38,48,55,61,86,98,104
      "XG 036 (Octave 2)":
        command: "$0024"
        presetDomain: 16
      "XG 037 (5th 1)":
        command: "$0025"
        presetDomain: 16-17,60
      "XG 038 (5th 2)":
        command: "$0026"
        presetDomain: 16
      "XG 039 (Bend)":
        command: "$0027"
      "XG 040 (Tutti 1)":
        command: "$0028"
        presetDomain: 0,2,4-5,16,19-20,25,28,32-33,38-39,44,46,48-49,52,54,61,63,65-66,81,98-99
      "XG 041 (Tutti 2)":
        command: "$0029"
        presetDomain: 0,2,5,25,28,30,39,48-49,54,61,63,66,82,98
      "XG 042 (Tutti 3)":
        command: "$002A"
        presetDomain: 5,48,61,98
      "XG 043 (Velo-Switch)":
        command: "$002B"
        presetDomain: 24,28-29,33,37,65
      "XG 045 (Velo-Xfade)":
        command: "$002D"
        presetDomain: 4-5,11,28,32-33,48,62-63,96
      "XG 064 (Other waves 1)":
        command: "$0040"
        presetDomain: 4,7,10,12,16,18-19,23,38-39,49-50,54-55,62-63,66,80,83-85,87-93,95-103,111,117-118
      "XG 065 (Other waves 2)":
        command: "$0041"
        presetDomain: 7,16,18-19,31,33,38,49-50,80,82,84,87,89-90,92-93,96,98-99,101-102,117-118
      "XG 066 (Other waves 3)":
        command: "$0042"
        presetDomain: 16,18,31,38,80,90-91,95-96,98-99,101-102,117
      "XG 067 (Other waves 4)":
        command: "$0043"
        presetDomain: 16,90-91,98-99,101-102
      "XG 068 (Other waves 5)":
        command: "$0044"
        presetDomain: 98,101-102
      "XG 069 (Other waves 6)":
        command: "$0045"
        presetDomain: 98,102
      "XG 070 (Other waves 7)":
        command: "$0046"
        presetDomain: 98,101
      "XG 071 (Other waves 8)":
        command: "$0047"
        presetDomain: 98,101
      "XG 072 (Other waves 9)":
        command: "$0048"
        presetDomain: 98
      "XG 096 (Other instr 1)":
        command: "$0060"
        presetDomain: 14-15,24-25,35,38,81,100-101,104-105,107,111-112,115-116
      "XG 097 (Other instr 2)":
        command: "$0061"
        presetDomain: 12,14-15,35,104-105,107,111-112,114
      "XG 098 (Other instr 3)":
        command: "$0062"
        presetDomain: 12,105,112,114
      "XG 099 (Other instr 4)":
        command: "$0063"
        presetDomain: 112
      "XG 100 (Other instr 5)":
        command: "$0064"
        presetDomain: 112
      "XG 101 (Other instr 6)":
        command: "$0065"
        presetDomain: 112
      "XG SFX":
        command: "$4000"
        category: 15
        presetDomain: 0-1,3,16,32-37,48-50,54-55,64-70,80-90,96-100,112-114,116
    categories:
      - "Piano"
      - "Chromatic Percussion"
      - "Organ"
      - "Guitar"
      - "Bass"
      - "Strings"
      - "Ensemble"
      - "Brass"
      - "Reed"
      - "Pipe"
      - "Synth lead"
      - "Synth Pad"
      - "Synth SFX"
      - "Ethnic"
      - "Percussive"
      - "Sound FX"
      - "DrumKit"
#
# Mappers to extract patch names
#
mappers:
  PerformanceMapper:
    fields:
      name:
        type: STRING
        offset: 9
        size: 8
      category:
        type: CATEGORY
        offset: 17
        size: 1
  # unfortunately there is no way to get the patch name
  XGPartMapper:
    fields:
      bankMSB:
        type: INTEGER
        offset: 10
        size: 1
      bankLSB:
        type: INTEGER
        offset: 11
        size: 1
      program:
        type: INTEGER
        offset: 12
        size: 1

controllers:
  - "01   | Modulation  | CC           | 0 | 127"
  - "0B   | Expression  | CC           | 0 | 127"
  - "40   | Sustain     | CC           | 0 | 127"
