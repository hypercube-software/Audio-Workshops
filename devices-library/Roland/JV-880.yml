#
# Do NOT edit this file, create a <device-name>-user.yml in the same directory instead
#
deviceName: "JV-880"
brand: "Roland"
presetFormat: BANK_MSB_PRG
presetNaming: STANDARD
macros:
  # Queries
  - "System Common()       : 009B : F041104611 00000000 00000110 CK8 F7"
  - "CurrentPerformance()    : 03C3 : F041104611 00001000 00010000 CK8 F7"
  - "Temp Rhythm Setup()   : 0C8D : F041104611 00074000 00003300 CK8 F7"
  - "CurrentPatch()          : 0229 : F041104611 00082000 00010000 CK8 F7"
  - "Performances()        : 19A0 : F041104611 01001000 00150000 CK8 F7"
  - "Internal Patches()    : 9943 : F041104611 01402000 00400000 CK8 F7"
  - "Internal Rhythm()     : 0C8D : F041104611 017F4000 00003300 CK8 F7"
  - "Everything()          : System Common();Performances();Internal Patches();Internal Rhythm();CurrentPerformance();Temp Rhythm Setup();CurrentPatch()"
  - "PatchName()           : F041104611 00082000 00000022 CK8 F7 : RolandPatchMapper"
  - "PerformanceName()     : F041104611 00001000 0000001F CK8 F7 : RolandPerformanceMapper"
  # Updates
  - "setMode(mode)         : F041104612 00000000 mode CK5 F7"
  - "setPatchMode()        : setMode($01)"
  - "setPerformanceMode()  : setMode($00)"
  # For SYSEX Controllers in Patch Mode
  - "setPatchToneParam(id,v,tone)   : F041104612 00 tone 28 id v CK5 F7"
  - "setPatchParam(id,v)   : setPatchToneParam(id,v,08)"


deviceModes:
  Patch:
    command: setPatchMode()
    backupCommand: CurrentPatch()
    queryName: PatchName()
    midiChannels: 0
    categories:
      - "Drum"
      - "Keyboard: Piano, Rhode,Grand"
      - "Chromatic Percussion: Clav, Marimba, Bell,Vibe"
      - "Organ"
      - "Guitar: Gtr,Strat,Overdrive,Nylon,Steel"
      - "Bass: Fretless, Bs, Slap"
      - "String: Pizz,Marcato,Strng,Harp"
      - "Brass: Trumpet, Horn,Trombone,Sax"
      - "Woodwinds: Flute,Ocarina,Pan,Harmon,Whistle"
      - "Synth Pad: Pad"
      - "Synth Lead: Lead, Fantasia, Sweep"
      - "Voice: Ahh, Ohh, Vox"
    banks:
      "Preset A Bank":
        command: 81
        presetDomain: 0-63
      "Preset B Bank":
        command: 81
        presetDomain: 64-127
      "Internal Bank":
        command: 80
        presetDomain: 0-63
      "Data Card":
        command: 80
        #presetDomain: 64-127
  Performance:
    command: setPerformanceMode()
    backupCommand: CurrentPerformance()
    queryName: PerformanceName()
    midiChannels: 0
    # In performance mode, channel 16 must be used to select performances
    banks:
      "Preset A Bank":
        command: 81
        channel: 16
        presetDomain: 0-15
      "Preset B Bank":
        command: 81
        channel: 16
        presetDomain: 0-15
      "Internal Bank":
        command: 80
        channel: 16
        presetDomain: 0-15
      "Data Card":
        command: 80
        channel: 16
        #presetDomain: 0-15

#
# Mappers to extract patch names
#
mappers:
  RolandPatchMapper:
    fields:
      name:
        type: STRING
        offset: 9
        size: 12
  RolandPerformanceMapper:
    fields:
      name:
        type: STRING
        offset: 9
        size: 12

controllers:
  - "01                     | Modulation   | CC    | 0 | 127"
  - "0B                     | Expression   | CC    | 0 | 127"
  - "40                     | Sustain      | CC    | 0 | 127"
  - "setPatchParam($4A,lsb) | Filter Freq  | SYSEX | 0 | 127"
  - "setPatchParam($4B,lsb) | Filter Res   | SYSEX | 0 | 127"
  - "setPatchParam($69,lsb) | VCA Attack   | SYSEX | 0 | 127"
  - "setPatchParam($6B,lsb) | VCA Decay    | SYSEX | 0 | 127"
  - "setPatchParam($6E,lsb) | VCA Sustain  | SYSEX | 0 | 127"
  - "setPatchParam($6F,lsb) | VCA Release  | SYSEX | 0 | 127"
  - "setPatchParam($25,lsb) | LFO 1 Rate   | SYSEX | 0 | 127"
  - "setPatchParam($30,lsb) | LFO 2 Rate   | SYSEX | 0 | 127"
